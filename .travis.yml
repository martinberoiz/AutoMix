language: c

compiler:
  - clang
  - gcc

script:
  - make examples
  - export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:./
  - ./amtoy1
  - test -f output_mix.data
  - ./amtoy1 -m 1 -N 1000
  - ./amtoy2 -f myout
  - test -f myout_mix.data
  - ./amtoy2 -m 1 -f myout -N 1000
  - make clean
  - rm output_*.data myout*.data
  - make examples DEBUG=1
  - ./amtoy1 -N 1000
  - test -f output_mix.data
  - make clean
  - clang-format src/user_examples/main.c | diff - src/user_examples/main.c
  - clang-format src/libautomix/automix.c | diff - src/libautomix/automix.c
  - clang-format src/libautomix/automix.h | diff - src/libautomix/automix.h
  - clang-format src/libautomix/logwrite.c | diff - src/libautomix/logwrite.c
  - clang-format src/libautomix/logwrite.h | diff - src/libautomix/logwrite.h
